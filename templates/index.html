<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>12_5 Tech â€” YT Downloader</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;700&family=Syne:wght@400;600;700;800&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DESIGN TOKENS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --bg:        #05060a;
  --bg2:       #080a10;
  --surface:   #0c0f18;
  --card:      #101420;
  --card2:     #141826;
  --border:    #1a2035;
  --border2:   #243050;
  --border3:   #2e3c60;
  --accent:    #00e5b0;
  --accent-dim:#00e5b022;
  --accent-glow: 0 0 24px rgba(0,229,176,.18);
  --accent2:   #7c6eff;
  --accent3:   #ff4f7b;
  --text:      #dce8ff;
  --text2:     #6b7aa0;
  --text3:     #343d5a;
  --green:     #22e89c;
  --yellow:    #f5b731;
  --red:       #ff3d5f;
  --log-bg:    #020408;
  --log-fg:    #00e5b0;
  --shadow-lg: 0 20px 60px rgba(0,0,0,.7);
  --shadow-sm: 0 4px 16px rgba(0,0,0,.4);
  --radius:    8px;
  --radius-lg: 12px;
}
[data-theme="night"] {
  --bg:#000203; --bg2:#010508; --surface:#030810; --card:#040a14;
  --card2:#060d1a; --border:#0d1628; --border2:#152040; --border3:#1e2f55;
  --accent:#00ffcc; --accent2:#c000ff; --accent3:#ff0055;
  --text:#e0f5ff; --text2:#4a607a; --text3:#1e2e40;
  --green:#00ff88; --yellow:#ffdd00; --red:#ff0044;
  --log-bg:#000; --log-fg:#00ff99;
}
[data-theme="light"] {
  --bg:#f2f4fb; --bg2:#ebedf7; --surface:#fff; --card:#fff;
  --card2:#f7f8fd; --border:#dde2f4; --border2:#c8d0ea; --border3:#aab8de;
  --accent:#0062ff; --accent-dim:#0062ff18; --accent2:#6200ff; --accent3:#ff0044;
  --text:#0b0e1f; --text2:#4a5580; --text3:#9aa0c0;
  --green:#007a42; --yellow:#b07000; --red:#cc0022;
  --log-bg:#0b0e1f; --log-fg:#00cc88;
  --shadow-lg: 0 20px 60px rgba(0,0,0,.12);
  --shadow-sm: 0 4px 16px rgba(0,0,0,.06);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESET & BASE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; font-size: 14px; }

body {
  font-family: 'Inter', sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  overflow-x: hidden;
}

/* Subtle grid texture */
body::before {
  content: '';
  position: fixed; inset: 0; z-index: 0; pointer-events: none;
  background-image:
    linear-gradient(rgba(0,229,176,.025) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0,229,176,.025) 1px, transparent 1px);
  background-size: 40px 40px;
}

/* Ambient glow orbs */
body::after {
  content: '';
  position: fixed; top: -30vh; left: -20vw; width: 60vw; height: 60vh;
  background: radial-gradient(ellipse, rgba(0,229,176,.04) 0%, transparent 65%);
  z-index: 0; pointer-events: none;
}

.app { position: relative; z-index: 1; display: grid; grid-template-rows: auto 1fr; min-height: 100vh; }

a { color: var(--accent); text-decoration: none; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCROLLBAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
::-webkit-scrollbar { width: 4px; height: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: var(--accent); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOPBAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.topbar {
  display: flex; align-items: center; gap: 24px;
  padding: 0 24px; height: 56px;
  background: rgba(8,10,16,.9);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border);
  position: sticky; top: 0; z-index: 100;
}

.topbar-logo {
  display: flex; align-items: center; gap: 0;
  font-family: 'Syne', sans-serif;
  font-size: 15px; font-weight: 800; letter-spacing: -.01em;
}
.topbar-logo .brand-main { color: var(--text); }
.topbar-logo .brand-dot { color: var(--accent); margin: 0 1px; }
.topbar-logo .brand-tag {
  margin-left: 12px; padding: 2px 8px; border-radius: 4px;
  background: var(--accent-dim); border: 1px solid rgba(0,229,176,.2);
  color: var(--accent); font-size: 10px; font-family: 'JetBrains Mono', monospace;
  font-weight: 500; letter-spacing: .06em; text-transform: uppercase;
}

.topbar-divider {
  height: 20px; width: 1px; background: var(--border2);
}

.topbar-right { margin-left: auto; display: flex; align-items: center; gap: 10px; }

/* Theme switcher */
.theme-switcher {
  display: flex; gap: 2px;
  background: var(--surface); border: 1px solid var(--border);
  border-radius: 6px; padding: 3px;
}
.theme-btn {
  padding: 3px 10px; border-radius: 4px; border: none; cursor: pointer;
  font-family: 'Inter', sans-serif; font-size: 11px; font-weight: 500;
  background: transparent; color: var(--text3); transition: all .15s;
}
.theme-btn:hover { color: var(--text2); }
.theme-btn.active { background: var(--card2); color: var(--accent); box-shadow: var(--shadow-sm); }

.yt-link {
  display: flex; align-items: center; gap: 6px;
  padding: 5px 12px; border-radius: 6px;
  border: 1px solid rgba(255,60,60,.2);
  background: rgba(255,40,40,.06); color: #ff6060 !important;
  font-family: 'Inter', sans-serif; font-size: 11px; font-weight: 600;
  letter-spacing: .02em; transition: all .15s;
}
.yt-link:hover { background: rgba(255,40,40,.12); border-color: rgba(255,60,60,.35); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LAYOUT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.main { display: flex; height: calc(100vh - 56px); overflow: hidden; }

/* â”€â”€ Sidebar â”€â”€ */
.sidebar {
  width: 210px; flex-shrink: 0;
  background: var(--bg2); border-right: 1px solid var(--border);
  display: flex; flex-direction: column; padding: 16px 0;
  overflow-y: auto;
}

.nav-section-label {
  font-family: 'JetBrains Mono', monospace; font-size: 9px; font-weight: 500;
  color: var(--text3); letter-spacing: .18em; text-transform: uppercase;
  padding: 0 16px 8px;
}

.nav-item {
  display: flex; align-items: center; gap: 10px;
  padding: 9px 16px; cursor: pointer; transition: all .12s;
  border-left: 2px solid transparent;
  font-family: 'Inter', sans-serif; font-size: 13px;
  font-weight: 500; color: var(--text2);
  user-select: none; position: relative;
}
.nav-item:hover { color: var(--text); background: rgba(255,255,255,.025); }
.nav-item.active {
  color: var(--accent);
  border-left-color: var(--accent);
  background: rgba(0,229,176,.04);
}
.nav-item.active::after {
  content: '';
  position: absolute; right: 12px; top: 50%; transform: translateY(-50%);
  width: 4px; height: 4px; border-radius: 50%; background: var(--accent);
  box-shadow: 0 0 8px var(--accent);
}

.nav-icon {
  font-size: 15px; width: 20px; text-align: center; flex-shrink: 0;
  filter: saturate(.7);
}
.nav-item.active .nav-icon { filter: none; }

.nav-spacer { height: 4px; }

.sidebar-footer {
  margin-top: auto; padding: 14px 16px;
  border-top: 1px solid var(--border);
  font-family: 'JetBrains Mono', monospace; font-size: 9px;
  color: var(--text3); line-height: 2;
}

.sidebar-version {
  display: inline-flex; align-items: center; gap: 5px;
  margin-top: 6px; padding: 2px 6px; border-radius: 3px;
  background: var(--accent-dim); border: 1px solid rgba(0,229,176,.15);
  color: var(--accent); font-size: 8px; letter-spacing: .1em;
}

/* â”€â”€ Content area â”€â”€ */
.content { flex: 1; overflow-y: auto; display: flex; flex-direction: column; }

/* â”€â”€ Panel â”€â”€ */
.panel { display: none; flex-direction: column; min-height: 100%; }
.panel.active { display: flex; }

.panel-header {
  padding: 20px 28px 0;
  background: var(--bg2);
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}

.panel-title {
  font-family: 'Syne', sans-serif; font-size: 22px;
  font-weight: 800; letter-spacing: -.02em; color: var(--text);
  margin-bottom: 3px;
}
.panel-title span { color: var(--accent); }
.panel-sub { color: var(--text2); font-size: 12px; margin-bottom: 14px; font-weight: 400; }

.panel-tabs { display: flex; gap: 0; }
.ptab {
  padding: 9px 16px;
  font-family: 'Inter', sans-serif; font-size: 12px; font-weight: 600;
  letter-spacing: .02em; color: var(--text2); cursor: pointer;
  border-bottom: 2px solid transparent; transition: all .15s;
}
.ptab:hover { color: var(--text); }
.ptab.active { color: var(--accent); border-bottom-color: var(--accent); }

.panel-body { flex: 1; overflow-y: auto; padding: 22px 28px 80px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FORM CONTROLS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.field { margin-bottom: 14px; }

.field-label {
  display: block; font-family: 'JetBrains Mono', monospace; font-size: 9px;
  font-weight: 500; letter-spacing: .18em; text-transform: uppercase;
  color: var(--text3); margin-bottom: 6px;
}

.field-input {
  width: 100%; padding: 9px 12px;
  background: var(--card); border: 1px solid var(--border2);
  border-radius: var(--radius); color: var(--text);
  font-family: 'JetBrains Mono', monospace;
  font-size: 12px; outline: none; transition: border-color .15s, box-shadow .15s;
  -webkit-appearance: none;
}
.field-input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(0,229,176,.08);
}
.field-input::placeholder { color: var(--text3); font-family: 'JetBrains Mono', monospace; }
select.field-input { cursor: pointer; }
select.field-input option { background: var(--surface); }

/* Grid helpers */
.row { display: flex; gap: 12px; align-items: flex-end; }
.row .field { flex: 1; margin-bottom: 0; }
.col-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.col-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; }
.col-4 { display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 12px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BUTTONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.btn {
  display: inline-flex; align-items: center; justify-content: center; gap: 7px;
  padding: 9px 18px; border-radius: var(--radius); border: none; cursor: pointer;
  font-family: 'Inter', sans-serif; font-size: 13px; font-weight: 600;
  letter-spacing: .01em; transition: all .15s;
  white-space: nowrap; user-select: none; position: relative; overflow: hidden;
}

.btn::before {
  content: '';
  position: absolute; inset: 0; opacity: 0;
  transition: opacity .15s;
  background: rgba(255,255,255,.08);
}
.btn:hover::before { opacity: 1; }

.btn-primary {
  background: linear-gradient(135deg, #00e5b0 0%, #00aeff 100%);
  color: #020d0c; font-weight: 700;
  box-shadow: 0 4px 20px rgba(0,229,176,.25);
}
.btn-primary:hover { box-shadow: 0 6px 28px rgba(0,229,176,.38); transform: translateY(-1px); }

.btn-green  {
  background: rgba(34,232,156,.08); color: var(--green);
  border: 1px solid rgba(34,232,156,.25);
}
.btn-green:hover { background: rgba(34,232,156,.15); border-color: rgba(34,232,156,.4); }

.btn-red    {
  background: rgba(255,61,95,.07); color: var(--red);
  border: 1px solid rgba(255,61,95,.2);
}
.btn-red:hover { background: rgba(255,61,95,.14); border-color: rgba(255,61,95,.35); }

.btn-ghost  {
  background: var(--card2); color: var(--text2);
  border: 1px solid var(--border2);
}
.btn-ghost:hover { border-color: var(--border3); color: var(--text); }

.btn-yellow {
  background: rgba(245,183,49,.07); color: var(--yellow);
  border: 1px solid rgba(245,183,49,.2);
}
.btn-yellow:hover { background: rgba(245,183,49,.14); }

.btn-accent2 {
  background: rgba(124,110,255,.08); color: var(--accent2);
  border: 1px solid rgba(124,110,255,.25);
}
.btn-accent2:hover { background: rgba(124,110,255,.15); }

.btn-full { width: 100%; }
.btn:disabled { opacity: .35; cursor: not-allowed; transform: none !important; pointer-events: none; }
.btn-sm { padding: 6px 12px; font-size: 11px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DIVIDER & SECTION LABELS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.divider { border: none; border-top: 1px solid var(--border); margin: 18px 0; }

.section-label {
  font-family: 'JetBrains Mono', monospace; font-size: 9px; font-weight: 500;
  letter-spacing: .18em; text-transform: uppercase; color: var(--text3);
  margin-bottom: 12px; display: flex; align-items: center; gap: 10px;
}
.section-label::after { content: ''; flex: 1; height: 1px; background: var(--border); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DOWNLOAD CARDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.dl-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 20px; }

.dl-card {
  background: var(--card); border: 1px solid var(--border2);
  border-radius: var(--radius-lg); padding: 20px;
  position: relative; overflow: hidden; transition: border-color .2s, box-shadow .2s;
}
.dl-card::before {
  content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px;
}
.dl-card::after {
  content: ''; position: absolute; inset: 0; opacity: 0;
  transition: opacity .25s; pointer-events: none;
  background: radial-gradient(ellipse at 30% 10%, rgba(0,229,176,.04) 0%, transparent 60%);
}
.dl-card:hover::after { opacity: 1; }

.dl-card-video::before { background: linear-gradient(90deg, var(--accent) 0%, var(--accent2) 100%); }
.dl-card-audio::before { background: linear-gradient(90deg, var(--green) 0%, var(--accent) 100%); }

.dl-card:hover { border-color: var(--border3); box-shadow: var(--shadow-sm); }

.dl-card-icon { font-size: 28px; margin-bottom: 10px; }
.dl-card-name {
  font-family: 'Syne', sans-serif; font-size: 16px; font-weight: 700;
  color: var(--text); margin-bottom: 4px;
}
.dl-card-desc { font-size: 11px; color: var(--text2); margin-bottom: 16px; line-height: 1.6; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SETTINGS STRIP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.settings-strip {
  background: var(--card); border: 1px solid var(--border);
  border-radius: var(--radius-lg); padding: 16px; margin: 14px 0;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LOG TERMINAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.log-wrap {
  background: var(--log-bg); border: 1px solid var(--border2);
  border-radius: var(--radius-lg); overflow: hidden; flex-shrink: 0;
  box-shadow: 0 2px 20px rgba(0,0,0,.5);
}

.log-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 8px 14px; border-bottom: 1px solid var(--border);
  background: var(--bg2);
}

.log-title {
  font-family: 'JetBrains Mono', monospace; font-size: 9px;
  color: var(--text3); letter-spacing: .18em; text-transform: uppercase;
  display: flex; align-items: center; gap: 8px;
}

/* macOS-style terminal dots */
.terminal-dots {
  display: flex; gap: 5px; margin-right: 8px;
}
.terminal-dots span {
  width: 10px; height: 10px; border-radius: 50%;
}
.terminal-dots .td-close  { background: #ff5f57; }
.terminal-dots .td-min    { background: #febc2e; }
.terminal-dots .td-max    { background: #28c840; }

.log-dot { width: 6px; height: 6px; border-radius: 50%; background: var(--border2); flex-shrink: 0; }
.log-dot.active { background: var(--accent); box-shadow: 0 0 8px var(--accent); animation: pulse 1.2s infinite; }
@keyframes pulse { 0%,100%{opacity:1} 50%{opacity:.3} }

.log-body {
  height: 240px; overflow-y: auto; padding: 14px 16px;
  font-family: 'JetBrains Mono', monospace; font-size: 11px;
  line-height: 1.85; color: var(--log-fg);
  white-space: pre-wrap; word-break: break-all;
}

.log-body:empty::after { content: 'Ready.'; color: var(--text3); }

/* Status bar */
.status-bar {
  display: flex; align-items: center; gap: 10px;
  padding: 7px 14px; border-top: 1px solid var(--border);
  background: var(--bg2); font-family: 'JetBrains Mono', monospace;
  font-size: 9px; color: var(--text3);
}
.status-indicator { width: 5px; height: 5px; border-radius: 50%; background: var(--text3); flex-shrink: 0; }
.status-indicator.ok    { background: var(--green); box-shadow: 0 0 6px var(--green); }
.status-indicator.error { background: var(--red); box-shadow: 0 0 6px var(--red); }
.status-indicator.active { background: var(--accent); box-shadow: 0 0 8px var(--accent); animation: pulse 1.2s infinite; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PLAYLIST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.pl-layout { display: grid; grid-template-columns: 1fr 260px; gap: 16px; }

.pl-list-wrap {
  background: var(--card); border: 1px solid var(--border2);
  border-radius: var(--radius-lg); overflow: hidden;
  display: flex; flex-direction: column;
}

.pl-list-header {
  padding: 11px 16px; background: var(--bg2); border-bottom: 1px solid var(--border);
  display: flex; align-items: center; gap: 12px;
  font-family: 'Inter', sans-serif; font-size: 12px;
  font-weight: 600; color: var(--text2);
}

.pl-stats { margin-left: auto; display: flex; gap: 14px; font-size: 10px; font-family: 'JetBrains Mono', monospace; }
.stat-done { color: var(--green); }
.stat-fail { color: var(--red); }
.stat-q    { color: var(--text3); }

.pl-list { flex: 1; overflow-y: auto; max-height: 380px; }

.pl-item {
  display: flex; align-items: center; gap: 10px;
  padding: 8px 16px; border-bottom: 1px solid rgba(26,32,53,.6);
  cursor: pointer; transition: background .1s; user-select: none;
}
.pl-item:hover { background: rgba(0,229,176,.03); }
.pl-item.selected {
  background: rgba(0,229,176,.06);
  border-left: 2px solid var(--accent);
  padding-left: 14px;
}
.pl-item:last-child { border-bottom: none; }

.pl-num { font-family: 'JetBrains Mono', monospace; font-size: 9px; color: var(--text3); min-width: 26px; }
.pl-title-text { font-size: 12px; color: var(--text); flex: 1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

.pl-badge {
  font-family: 'Inter', sans-serif; font-size: 9px; font-weight: 700;
  padding: 2px 8px; border-radius: 20px; letter-spacing: .04em; flex-shrink: 0;
  text-transform: uppercase;
}
.badge-queued     { background: rgba(74,82,128,.12); color: var(--text3); }
.badge-downloading{ background: rgba(0,229,176,.10); color: var(--accent); animation: pulse 1.2s infinite; }
.badge-done       { background: rgba(34,232,156,.09); color: var(--green); }
.badge-failed     { background: rgba(255,61,95,.09); color: var(--red); }
.badge-skipped    { background: rgba(245,183,49,.07); color: var(--yellow); }

/* Action panel */
.action-panel { display: flex; flex-direction: column; gap: 10px; }

.action-card {
  background: var(--card); border: 1px solid var(--border2);
  border-radius: var(--radius-lg); padding: 14px;
}
.action-card-title {
  font-family: 'Syne', sans-serif; font-size: 13px; font-weight: 700;
  margin-bottom: 3px;
}
.action-card-hint { font-size: 11px; color: var(--text2); margin-bottom: 12px; }
.ac-1 { border-top: 2px solid var(--green); }   .ac-1 .action-card-title { color: var(--green); }
.ac-2 { border-top: 2px solid var(--yellow); }  .ac-2 .action-card-title { color: var(--yellow); }
.ac-3 { border-top: 2px solid var(--accent); }  .ac-3 .action-card-title { color: var(--accent); }

.num-input-row { display: flex; gap: 8px; align-items: flex-end; }
.num-input-row .field { flex: 1; margin: 0; }
.num-sep { font-size: 12px; color: var(--text3); padding-bottom: 10px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SETTINGS PAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.tools-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 10px; margin-top: 14px; }

.tool-card {
  background: var(--card); border: 1px solid var(--border2);
  border-radius: var(--radius-lg); padding: 14px 16px;
  display: flex; align-items: center; gap: 14px;
  transition: border-color .15s;
}
.tool-card:hover { border-color: var(--border3); }
.tool-icon { font-size: 20px; flex-shrink: 0; }
.tool-name { font-family: 'Inter', sans-serif; font-size: 13px; font-weight: 600; color: var(--text); }
.tool-ver  { font-family: 'JetBrains Mono', monospace; font-size: 9px; color: var(--text2); margin-top: 3px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.tool-status { margin-left: auto; flex-shrink: 0; }
.badge-ok  { color: var(--green); font-size: 16px; }
.badge-err { color: var(--red); font-size: 16px; }

.info-block {
  background: var(--card); border: 1px solid var(--border);
  border-left: 3px solid var(--accent);
  border-radius: var(--radius-lg); padding: 16px;
  font-size: 12px; color: var(--text2);
  line-height: 2; margin-bottom: 10px;
  font-family: 'JetBrains Mono', monospace;
}
.info-block b { color: var(--text); font-weight: 600; }
.info-block .hi { color: var(--accent); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GLOBAL STOP BAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.stop-bar {
  position: fixed; bottom: 0; left: 0; right: 0; z-index: 200;
  background: rgba(8,10,16,.95); backdrop-filter: blur(16px);
  border-top: 1px solid var(--border);
  padding: 9px 28px; display: flex; align-items: center; gap: 14px;
}
.stop-status {
  flex: 1; font-family: 'JetBrains Mono', monospace; font-size: 10px;
  color: var(--text2); white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOAST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.toast-wrap { position: fixed; top: 68px; right: 20px; z-index: 999; display: flex; flex-direction: column; gap: 8px; }

.toast {
  padding: 10px 16px; border-radius: var(--radius); backdrop-filter: blur(12px);
  font-family: 'Inter', sans-serif; font-size: 13px; font-weight: 600;
  animation: slideIn .22s cubic-bezier(.16,1,.3,1); min-width: 210px;
  box-shadow: 0 8px 32px rgba(0,0,0,.5);
}
.toast-ok    { background: rgba(34,232,156,.1); border: 1px solid rgba(34,232,156,.25); color: var(--green); }
.toast-error { background: rgba(255,61,95,.1); border: 1px solid rgba(255,61,95,.25); color: var(--red); }
.toast-info  { background: rgba(0,229,176,.08); border: 1px solid rgba(0,229,176,.25); color: var(--accent); }

@keyframes slideIn { from { transform: translateX(20px) scale(.96); opacity: 0; } to { transform: none; opacity: 1; } }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
/* Mobile top nav */
.mobile-nav {
  display: none;
  background: var(--bg2); border-bottom: 1px solid var(--border);
  padding: 0 16px; overflow-x: auto; gap: 0;
  scrollbar-width: none;
}
.mobile-nav::-webkit-scrollbar { display: none; }
.mobile-nav-item {
  display: inline-flex; align-items: center; gap: 7px;
  padding: 11px 16px; white-space: nowrap; cursor: pointer;
  font-family: 'Inter', sans-serif; font-size: 12px; font-weight: 600;
  color: var(--text2); border-bottom: 2px solid transparent;
  transition: all .15s; user-select: none; flex-shrink: 0;
}
.mobile-nav-item:hover { color: var(--text); }
.mobile-nav-item.active { color: var(--accent); border-bottom-color: var(--accent); }

@media (max-width: 960px) {
  .sidebar { display: none; }
  .mobile-nav { display: flex; }
  .dl-grid { grid-template-columns: 1fr; }
  .col-4, .col-3 { grid-template-columns: 1fr 1fr; }
  .pl-layout { grid-template-columns: 1fr; }
}
@media (max-width: 620px) {
  .col-2, .col-3, .col-4 { grid-template-columns: 1fr; }
  .panel-body { padding: 16px 16px 80px; }
  .topbar { padding: 0 16px; }
}
</style>
</head>
<body>
<div class="app">

<!-- â”€â”€ TOP BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<header class="topbar">
  <div class="topbar-logo">
    <span class="brand-main">12</span><span class="brand-dot">_</span><span class="brand-main">5</span>
    <span class="brand-tag">YT-DL v3</span>
  </div>

  <div class="topbar-divider"></div>

  <div class="topbar-right">
    <div class="theme-switcher">
      <button class="theme-btn active" onclick="setTheme('dark')">Dark</button>
      <button class="theme-btn" onclick="setTheme('night')">Night</button>
      <button class="theme-btn" onclick="setTheme('light')">Light</button>
    </div>
    <a href="https://www.youtube.com/@12_5tech" target="_blank" class="yt-link">
      <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M23.5 6.2a3 3 0 0 0-2.1-2.1C19.5 3.5 12 3.5 12 3.5s-7.5 0-9.4.6A3 3 0 0 0 .5 6.2C0 8.1 0 12 0 12s0 3.9.5 5.8a3 3 0 0 0 2.1 2.1c1.9.6 9.4.6 9.4.6s7.5 0 9.4-.6a3 3 0 0 0 2.1-2.1C24 15.9 24 12 24 12s0-3.9-.5-5.8zM9.75 15.5V8.5l6.25 3.5-6.25 3.5z"/></svg>
      @12_5tech
    </a>
  </div>
</header>

<!-- â”€â”€ MOBILE NAV (shows when sidebar hidden) â”€â”€â”€â”€â”€â”€â”€ -->
<div class="mobile-nav" id="mobile-nav">
  <div class="mobile-nav-item active" onclick="showPanel('single')">ğŸ¬ Single Video</div>
  <div class="mobile-nav-item" onclick="showPanel('playlist')">ğŸ“‹ Playlist</div>
  <div class="mobile-nav-item" onclick="showPanel('convert')">ğŸ”„ Convert</div>
  <div class="mobile-nav-item" onclick="showPanel('settings')">âš™ï¸ Settings</div>
</div>

<!-- â”€â”€ MAIN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="main">

  <!-- Sidebar -->
  <nav class="sidebar">
    <div class="nav-section-label">Downloads</div>
    <div class="nav-item active" onclick="showPanel('single')">
      <span class="nav-icon">ğŸ¬</span> Single Video
    </div>
    <div class="nav-item" onclick="showPanel('playlist')">
      <span class="nav-icon">ğŸ“‹</span> Playlist
    </div>
    <div class="nav-item" onclick="showPanel('convert')">
      <span class="nav-icon">ğŸ”„</span> Convert File
    </div>
    <div class="nav-spacer"></div>
    <div class="nav-section-label">System</div>
    <div class="nav-item" onclick="showPanel('settings')">
      <span class="nav-icon">âš™ï¸</span> Settings
    </div>
    <div class="sidebar-footer">
      yt-dlp + ffmpeg<br>
      Auto-updates on launch<br>
      Smart 403 retry âœ“
      <div class="sidebar-version">â— ACTIVE</div>
    </div>
  </nav>

  <!-- Content -->
  <div class="content">

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         PANEL: SINGLE VIDEO
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="panel active" id="panel-single">
      <div class="panel-header">
        <div class="panel-title"><span>Single</span> Download</div>
        <div class="panel-sub">Download any video or audio from YouTube and 1000+ supported sites</div>
        <div class="panel-tabs">
          <div class="ptab active" onclick="showSubTab('single','video',this)">ğŸ¬ Video</div>
          <div class="ptab" onclick="showSubTab('single','audio',this)">ğŸµ Audio</div>
        </div>
      </div>
      <div class="panel-body">

        <!-- URL + Save -->
        <div class="row" style="margin-bottom:18px">
          <div class="field" style="flex:3">
            <label class="field-label">URL</label>
            <input id="sv-url" class="field-input" placeholder="https://youtube.com/watch?v=â€¦ or any supported URL" type="text">
          </div>
          <div class="field" style="flex:2">
            <label class="field-label">Save Folder</label>
            <input id="sv-dir" class="field-input" value="{{ default_dir }}" type="text">
          </div>
        </div>

        <!-- VIDEO/AUDIO cards -->
        <div id="sv-sub-video">
          <div class="dl-grid">
            <div class="dl-card dl-card-video">
              <div class="dl-card-icon">ğŸ¬</div>
              <div class="dl-card-name">Video Download</div>
              <div class="dl-card-desc">Saves as MP4 Â· merges best video + audio Â· DASH-aware with smart fallback</div>
              <div class="field">
                <label class="field-label">Quality</label>
                <select id="sv-quality" class="field-input">
                  <option value="best">Best Available (4K / 8K)</option>
                  <option value="1080p" selected>1080p HD</option>
                  <option value="720p">720p</option>
                  <option value="480p">480p</option>
                  <option value="worst">Smallest File</option>
                </select>
              </div>
              <button class="btn btn-primary btn-full" onclick="startDownload('video')">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                Download MP4
              </button>
            </div>
            <div class="dl-card dl-card-audio">
              <div class="dl-card-icon">ğŸµ</div>
              <div class="dl-card-name">Audio Download</div>
              <div class="dl-card-desc">Extract best-quality audio Â· transcode to your chosen format</div>
              <div class="field">
                <label class="field-label">Format</label>
                <select id="sv-afmt" class="field-input">
                  <option value="mp3">MP3</option>
                  <option value="aac">AAC</option>
                  <option value="flac">FLAC (Lossless)</option>
                  <option value="wav">WAV</option>
                  <option value="opus">Opus</option>
                </select>
              </div>
              <button class="btn btn-green btn-full" onclick="startDownload('audio')">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>
                Download Audio
              </button>
            </div>
          </div>
        </div>

        <!-- Anti-403 Settings -->
        <div class="section-label">Anti-403 &amp; Connection Settings</div>
        <div class="settings-strip">
          <div class="col-4">
            <div class="field">
              <label class="field-label">Cookie Browser</label>
              <select id="sv-browser" class="field-input">
                <option>None</option><option>Chrome</option><option>Firefox</option>
                <option>Edge</option><option>Brave</option><option>Opera</option>
                <option>Chromium</option><option>Safari</option>
              </select>
            </div>
            <div class="field">
              <label class="field-label">cookies.txt Path</label>
              <input id="sv-cookie" class="field-input" placeholder="/path/to/cookies.txt">
            </div>
            <div class="field">
              <label class="field-label">Speed Limit</label>
              <select id="sv-rate" class="field-input">
                <option>No limit</option><option>10MB/s</option><option>5MB/s</option>
                <option>2MB/s</option><option>1MB/s</option><option>500KB/s</option>
              </select>
            </div>
            <div class="field">
              <label class="field-label">Retries</label>
              <select id="sv-retries" class="field-input">
                <option>3</option><option selected>5</option><option>10</option><option>20</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Log -->
        <div class="section-label">Live Terminal Output</div>
        <div class="log-wrap">
          <div class="log-header">
            <div class="terminal-dots">
              <span class="td-close"></span><span class="td-min"></span><span class="td-max"></span>
            </div>
            <div class="log-title">
              <div class="log-dot" id="sv-dot"></div>
              TERMINAL â€” yt-dlp
            </div>
            <button class="btn btn-ghost btn-sm" onclick="clearLog('sv-log')">Clear</button>
          </div>
          <div class="log-body" id="sv-log">Ready. Paste a URL above and click Download.</div>
          <div class="status-bar">
            <div class="status-indicator" id="sv-status-dot"></div>
            <span id="sv-status-text">Idle</span>
          </div>
        </div>

      </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         PANEL: PLAYLIST
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="panel" id="panel-playlist">
      <div class="panel-header">
        <div class="panel-title"><span>Playlist</span> Manager</div>
        <div class="panel-sub">Load a playlist, then download a single video, a range, or everything at once</div>
        <div style="height:12px"></div>
      </div>
      <div class="panel-body">

        <!-- Load bar -->
        <div class="row" style="margin-bottom:14px">
          <div class="field" style="flex:3">
            <label class="field-label">Playlist URL</label>
            <input id="pl-url" class="field-input" placeholder="https://youtube.com/playlist?list=â€¦">
          </div>
          <div class="field" style="flex:2">
            <label class="field-label">Save Folder</label>
            <input id="pl-dir" class="field-input" value="{{ default_dir }}">
          </div>
          <div style="flex-shrink:0; align-self:flex-end">
            <button class="btn btn-ghost" onclick="loadPlaylist()" id="pl-load-btn">
              <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
              Load
            </button>
          </div>
        </div>

        <!-- Settings -->
        <div class="settings-strip" style="margin-bottom:16px">
          <div class="col-4">
            <div class="field">
              <label class="field-label">Format</label>
              <select id="pl-mode" class="field-input">
                <option value="video">Video (MP4)</option>
                <option value="audio">Audio (MP3)</option>
              </select>
            </div>
            <div class="field">
              <label class="field-label">Quality</label>
              <select id="pl-quality" class="field-input">
                <option value="best">Best</option>
                <option value="1080p" selected>1080p</option>
                <option value="720p">720p</option>
                <option value="480p">480p</option>
              </select>
            </div>
            <div class="field">
              <label class="field-label">Cookie Browser</label>
              <select id="pl-browser" class="field-input">
                <option>None</option><option>Chrome</option><option>Firefox</option>
                <option>Edge</option><option>Brave</option>
              </select>
            </div>
            <div class="field">
              <label class="field-label">Speed Limit</label>
              <select id="pl-rate" class="field-input">
                <option>No limit</option><option>10MB/s</option><option>5MB/s</option><option>2MB/s</option>
              </select>
            </div>
          </div>
          <div class="row" style="margin-top:10px; gap:16px">
            <div class="field">
              <label class="field-label">cookies.txt</label>
              <input id="pl-cookie" class="field-input" placeholder="/path/to/cookies.txt">
            </div>
            <div class="field" style="max-width:90px">
              <label class="field-label">Retries</label>
              <select id="pl-retries" class="field-input">
                <option>3</option><option selected>5</option><option>10</option><option>20</option>
              </select>
            </div>
            <div class="field" style="max-width:110px">
              <label class="field-label">Skip Done</label>
              <select id="pl-skip" class="field-input">
                <option value="true" selected>Yes</option>
                <option value="false">No</option>
              </select>
            </div>
            <div style="flex-shrink:0; align-self:flex-end">
              <button class="btn btn-ghost btn-sm" onclick="resetPlaylist()">â†º Reset</button>
            </div>
          </div>
        </div>

        <!-- List + Actions -->
        <div class="pl-layout">
          <div>
            <div class="pl-list-wrap">
              <div class="pl-list-header">
                <span id="pl-count">No playlist loaded</span>
                <div class="pl-stats">
                  <span class="stat-done" id="pl-done-count">âœ“ 0</span>
                  <span class="stat-fail" id="pl-fail-count">âœ— 0</span>
                  <span class="stat-q" id="pl-q-count">â—‹ 0</span>
                </div>
              </div>
              <div class="pl-list" id="pl-list">
                <div style="padding:40px; text-align:center; color:var(--text3); font-family:'JetBrains Mono',monospace; font-size:11px; line-height:2">
                  Paste a playlist URL above<br>and click Load
                </div>
              </div>
            </div>
          </div>

          <!-- Actions -->
          <div class="action-panel">
            <div class="action-card ac-1">
              <div class="action-card-title">â‘  Single</div>
              <div class="action-card-hint">Click a row or type a number</div>
              <div class="field">
                <label class="field-label">Video #</label>
                <input id="pl-idx" class="field-input" type="number" value="1" min="1">
              </div>
              <button class="btn btn-green btn-full" onclick="dlOne()">â¬‡ Download Selected</button>
            </div>
            <div class="action-card ac-2">
              <div class="action-card-title">â‘¡ Range</div>
              <div class="action-card-hint">e.g. items 3 through 10</div>
              <div class="num-input-row">
                <div class="field">
                  <label class="field-label">From</label>
                  <input id="pl-range-start" class="field-input" type="number" value="1" min="1">
                </div>
                <div class="num-sep">â€”</div>
                <div class="field">
                  <label class="field-label">To</label>
                  <input id="pl-range-end" class="field-input" type="number" value="5" min="1">
                </div>
              </div>
              <button class="btn btn-yellow btn-full" onclick="dlRange()">â¬‡ Download Range</button>
            </div>
            <div class="action-card ac-3">
              <div class="action-card-title">â‘¢ Batch All</div>
              <div class="action-card-hint">Download every video in order</div>
              <button class="btn btn-primary btn-full" onclick="dlAll()">â¬‡ Download All</button>
            </div>
          </div>
        </div>

        <!-- Playlist log -->
        <div class="section-label" style="margin-top:20px">Live Terminal Output</div>
        <div class="log-wrap">
          <div class="log-header">
            <div class="terminal-dots">
              <span class="td-close"></span><span class="td-min"></span><span class="td-max"></span>
            </div>
            <div class="log-title"><div class="log-dot" id="pl-dot"></div> TERMINAL â€” yt-dlp</div>
            <button class="btn btn-ghost btn-sm" onclick="clearLog('pl-log')">Clear</button>
          </div>
          <div class="log-body" id="pl-log">Ready.</div>
          <div class="status-bar">
            <div class="status-indicator" id="pl-status-dot"></div>
            <span id="pl-status-text">Idle</span>
          </div>
        </div>

      </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         PANEL: CONVERT
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="panel" id="panel-convert">
      <div class="panel-header">
        <div class="panel-title"><span>Convert</span> File</div>
        <div class="panel-sub">Convert any local video file to audio using FFmpeg</div>
        <div style="height:12px"></div>
      </div>
      <div class="panel-body">
        <div class="field">
          <label class="field-label">Local Video File Path</label>
          <input id="cv-path" class="field-input" placeholder="/home/user/video.mp4" type="text">
        </div>
        <div class="col-3">
          <div class="field">
            <label class="field-label">Output Format</label>
            <select id="cv-fmt" class="field-input">
              <option>mp3</option><option>aac</option><option>flac</option><option>wav</option><option>opus</option>
            </select>
          </div>
          <div class="field">
            <label class="field-label">Bitrate</label>
            <select id="cv-bitrate" class="field-input">
              <option>128k</option><option>192k</option><option>256k</option><option selected>320k</option>
            </select>
          </div>
          <div class="field" style="display:flex; align-items:flex-end">
            <button class="btn btn-primary btn-full" onclick="startConvert()">ğŸ”„ Convert to Audio</button>
          </div>
        </div>

        <div class="section-label" style="margin-top:20px">FFmpeg Output</div>
        <div class="log-wrap">
          <div class="log-header">
            <div class="terminal-dots">
              <span class="td-close"></span><span class="td-min"></span><span class="td-max"></span>
            </div>
            <div class="log-title"><div class="log-dot" id="cv-dot"></div> TERMINAL â€” ffmpeg</div>
            <button class="btn btn-ghost btn-sm" onclick="clearLog('cv-log')">Clear</button>
          </div>
          <div class="log-body" id="cv-log">Ready.</div>
          <div class="status-bar">
            <div class="status-indicator" id="cv-status-dot"></div>
            <span id="cv-status-text">Idle</span>
          </div>
        </div>
      </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         PANEL: SETTINGS
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="panel" id="panel-settings">
      <div class="panel-header">
        <div class="panel-title"><span>Settings</span> &amp; Tools</div>
        <div class="panel-sub">Dependency status, yt-dlp updates, and troubleshooting</div>
        <div style="height:12px"></div>
      </div>
      <div class="panel-body">
        <div class="row" style="margin-bottom:20px">
          <button class="btn btn-ghost" onclick="checkTools()">
            <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
            Check Dependencies
          </button>
          <button class="btn btn-yellow" onclick="updateYtdlp()">
            <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 3 21 3 21 8"/><line x1="4" y1="20" x2="21" y2="3"/><polyline points="21 16 21 21 16 21"/><line x1="15" y1="15" x2="21" y2="21"/></svg>
            Update yt-dlp
          </button>
        </div>

        <div class="tools-grid" id="tools-grid">
          <div style="color:var(--text3); font-family:'JetBrains Mono',monospace; font-size:11px; padding:4px">
            Click "Check Dependencies" to see tool versions
          </div>
        </div>

        <div class="section-label" style="margin-top:24px">Update Log</div>
        <div class="log-wrap">
          <div class="log-header">
            <div class="terminal-dots">
              <span class="td-close"></span><span class="td-min"></span><span class="td-max"></span>
            </div>
            <div class="log-title"><div class="log-dot" id="st-dot"></div> TERMINAL â€” pip</div>
            <button class="btn btn-ghost btn-sm" onclick="clearLog('st-log')">Clear</button>
          </div>
          <div class="log-body" id="st-log">Ready.</div>
          <div class="status-bar">
            <div class="status-indicator" id="st-status-dot"></div>
            <span id="st-status-text">Idle</span>
          </div>
        </div>

        <div class="section-label" style="margin-top:24px">Help &amp; Info</div>
        <div class="info-block">
          <b>Windows audio-only fix:</b> <span class="hi">&lt;</span> and <span class="hi">&gt;</span>
          in format strings are auto-escaped to <span class="hi">^&lt;</span>/<span class="hi">^&gt;</span>
          so cmd.exe doesn't redirect the stream.<br><br>
          <b>SABR / 403 auto-retry order:</b><br>
          â‘  tv_embedded+mediaconnect Â· â‘¡ android+ios Â· â‘¢ direct Â· â‘£ mweb
          Â· â‘¤ tv+cookies Â· â‘¥ android+IPv4 Â· â‘¦ format fallback Â· â‘§ IPv4+sleep
          Â· â‘¨â€“â‘© browser cookies Ã— android
        </div>
        <div class="info-block" style="border-left-color:var(--accent2)">
          <b>If all strategies fail:</b> update yt-dlp Â· set cookie browser Â· export cookies.txt Â· wait 15â€“30 min Â· try VPN<br><br>
          <b>Supported sites:</b> YouTube Â· Vimeo Â· Twitter/X Â· TikTok Â· Instagram Â· Twitch Â· SoundCloud Â· 1000+ more
        </div>
      </div>
    </div>

  </div><!-- /content -->
</div><!-- /main -->
</div><!-- /app -->

<!-- â”€â”€ GLOBAL STOP BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="stop-bar">
  <button class="btn btn-red btn-sm" onclick="stopAll()">
    <svg width="11" height="11" viewBox="0 0 24 24" fill="currentColor"><rect x="3" y="3" width="18" height="18" rx="2"/></svg>
    Stop
  </button>
  <span class="stop-status" id="stop-status">No active download</span>
</div>

<!-- â”€â”€ TOAST CONTAINER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="toast-wrap" id="toasts"></div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     JAVASCRIPT  â€” unchanged from original
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
// â”€â”€ Client ID â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const CLIENT_ID = Math.random().toString(36).slice(2);

// â”€â”€ Theme â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function setTheme(t) {
  document.documentElement.setAttribute('data-theme', t);
  document.querySelectorAll('.theme-btn').forEach(b => b.classList.remove('active'));
  document.querySelector(`.theme-btn[onclick="setTheme('${t}')"]`)?.classList.add('active');
  try { localStorage.setItem('ytdl_theme', t); } catch(e) {}
}
(function() {
  const saved = localStorage.getItem('ytdl_theme') || 'dark';
  setTheme(saved);
})();

// â”€â”€ Panel navigation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showPanel(id) {
  document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
  document.querySelectorAll('.mobile-nav-item').forEach(n => n.classList.remove('active'));
  document.getElementById('panel-' + id)?.classList.add('active');
  document.querySelector(`.nav-item[onclick="showPanel('${id}')"]`)?.classList.add('active');
  document.querySelector(`.mobile-nav-item[onclick="showPanel('${id}')"]`)?.classList.add('active');
}

function showSubTab(panel, tab, el) {
  el.closest('.panel-header').querySelectorAll('.ptab').forEach(t => t.classList.remove('active'));
  el.classList.add('active');
}

// â”€â”€ Toast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function toast(msg, type='info') {
  const t = document.createElement('div');
  t.className = `toast toast-${type}`; t.textContent = msg;
  document.getElementById('toasts').appendChild(t);
  setTimeout(() => t.remove(), 3500);
}

// â”€â”€ Log helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function appendLog(id, line) {
  const el = document.getElementById(id);
  el.textContent += line + '\n';
  el.scrollTop = el.scrollHeight;
}
function clearLog(id) { document.getElementById(id).textContent = ''; }
function setStatus(prefix, state, text) {
  const dot  = document.getElementById(prefix + '-status-dot');
  const txt  = document.getElementById(prefix + '-status-text');
  const ldot = document.getElementById(prefix + '-dot');
  dot.className = 'status-indicator ' + state;
  if (ldot) ldot.className = 'log-dot' + (state === 'active' ? ' active' : '');
  txt.textContent = text;
}

// â”€â”€ SSE connection â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let evtSource = null;
let currentLog = 'sv-log';
let currentPrefix = 'sv';

function startSSE() {
  if (evtSource) { evtSource.close(); evtSource = null; }
  evtSource = new EventSource(`/stream/${CLIENT_ID}`);

  evtSource.addEventListener('log', e => {
    appendLog(currentLog, e.data);
    document.getElementById('stop-status').textContent = e.data.slice(0, 80);
  });

  evtSource.addEventListener('done', e => {
    const d = JSON.parse(e.data);
    setStatus(currentPrefix, d.ok ? 'ok' : 'error', d.ok ? 'âœ… Done â€” ' + (d.path || '') : 'âŒ Failed');
    toast(d.ok ? 'âœ… Download complete!' : 'âŒ Download failed', d.ok ? 'ok' : 'error');
    document.getElementById('stop-status').textContent = d.ok ? 'Done' : 'Failed';
  });

  evtSource.addEventListener('playlist', e => {
    const videos = JSON.parse(e.data);
    renderPlaylist(videos);
  });
}

startSSE();

// â”€â”€ POST helper â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function post(url, data) {
  const r = await fetch(url, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ ...data, client_id: CLIENT_ID })
  });
  return r.json();
}

// â”€â”€ Single video/audio download â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function startDownload(type) {
  const url = document.getElementById('sv-url').value.trim();
  if (!url) { toast('Please enter a URL', 'error'); return; }
  currentLog = 'sv-log'; currentPrefix = 'sv';
  clearLog('sv-log');
  setStatus('sv', 'active', 'Downloadingâ€¦');
  document.getElementById('stop-status').textContent = 'Startingâ€¦';

  if (type === 'video') {
    post('/api/download/video', {
      url,
      save_dir:    document.getElementById('sv-dir').value,
      quality:     document.getElementById('sv-quality').value,
      browser:     document.getElementById('sv-browser').value,
      cookie_file: document.getElementById('sv-cookie').value,
      rate_limit:  document.getElementById('sv-rate').value,
      retries:     document.getElementById('sv-retries').value,
    });
  } else {
    post('/api/download/audio', {
      url,
      save_dir:    document.getElementById('sv-dir').value,
      audio_fmt:   document.getElementById('sv-afmt').value,
      browser:     document.getElementById('sv-browser').value,
      cookie_file: document.getElementById('sv-cookie').value,
      rate_limit:  document.getElementById('sv-rate').value,
      retries:     document.getElementById('sv-retries').value,
    });
  }
}

// â”€â”€ Playlist â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let playlistData = [];

async function loadPlaylist() {
  const url = document.getElementById('pl-url').value.trim();
  if (!url) { toast('Please enter a playlist URL', 'error'); return; }
  const btn = document.getElementById('pl-load-btn');
  btn.disabled = true; btn.textContent = 'â³ Loadingâ€¦';
  document.getElementById('pl-list').innerHTML =
    '<div style="padding:30px;text-align:center;color:var(--text3);font-family:\'JetBrains Mono\',monospace;font-size:11px">Fetching playlistâ€¦</div>';
  try {
    const r = await post('/api/playlist/fetch', {
      url,
      browser:     document.getElementById('pl-browser').value,
      cookie_file: document.getElementById('pl-cookie').value,
    });
    if (r.error) { toast('Error: ' + r.error, 'error'); return; }
    playlistData = r.videos;
    renderPlaylist(r.videos);
    toast(`Loaded ${r.videos.length} videos`, 'ok');
  } catch(e) { toast('Network error', 'error'); }
  finally {
    btn.disabled = false;
    btn.innerHTML = '<svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg> Load';
  }
}

function renderPlaylist(videos) {
  playlistData = videos;
  const list = document.getElementById('pl-list');
  document.getElementById('pl-count').textContent = `${videos.length} Videos`;
  document.getElementById('pl-done-count').textContent = 'âœ“ ' + videos.filter(v => v.status === 'done').length;
  document.getElementById('pl-fail-count').textContent = 'âœ— ' + videos.filter(v => v.status === 'failed').length;
  document.getElementById('pl-q-count').textContent    = 'â—‹ ' + videos.filter(v => v.status === 'queued').length;

  if (!videos.length) { list.innerHTML = '<div style="padding:40px;text-align:center;color:var(--text3)">Empty playlist</div>'; return; }
  list.innerHTML = videos.map((v, i) => `
    <div class="pl-item ${i === selectedIdx ? 'selected' : ''}" onclick="selectPl(${i})" id="pl-item-${i}">
      <span class="pl-num">${String(i + 1).padStart(2, '0')}</span>
      <span class="pl-title-text" title="${escHtml(v.title)}">${escHtml(v.title.slice(0, 70))}${v.title.length > 70 ? 'â€¦' : ''}</span>
      <span class="pl-badge badge-${v.status}">${v.status}</span>
    </div>`).join('');
}

let selectedIdx = -1;
function selectPl(i) {
  selectedIdx = i;
  document.getElementById('pl-idx').value = i + 1;
  document.querySelectorAll('.pl-item').forEach((el, j) => el.classList.toggle('selected', j === i));
}

function plCommon() {
  return {
    save_dir:    document.getElementById('pl-dir').value,
    quality:     document.getElementById('pl-quality').value,
    mode:        document.getElementById('pl-mode').value,
    skip_done:   document.getElementById('pl-skip').value === 'true',
    browser:     document.getElementById('pl-browser').value,
    cookie_file: document.getElementById('pl-cookie').value,
    rate_limit:  document.getElementById('pl-rate').value,
    retries:     document.getElementById('pl-retries').value,
  };
}

function dlOne() {
  currentLog = 'pl-log'; currentPrefix = 'pl';
  clearLog('pl-log'); setStatus('pl', 'active', 'Downloadingâ€¦');
  post('/api/playlist/download/one', { index: parseInt(document.getElementById('pl-idx').value), ...plCommon() });
}
function dlRange() {
  currentLog = 'pl-log'; currentPrefix = 'pl';
  clearLog('pl-log'); setStatus('pl', 'active', 'Downloading rangeâ€¦');
  post('/api/playlist/download/range', {
    start: parseInt(document.getElementById('pl-range-start').value),
    end:   parseInt(document.getElementById('pl-range-end').value),
    ...plCommon()
  });
}
function dlAll() {
  currentLog = 'pl-log'; currentPrefix = 'pl';
  clearLog('pl-log'); setStatus('pl', 'active', 'Batch downloadingâ€¦');
  post('/api/playlist/download/all', plCommon());
}
async function resetPlaylist() {
  const r = await post('/api/playlist/reset', {});
  renderPlaylist(r.videos);
  toast('Statuses reset', 'info');
}

// â”€â”€ Convert â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function startConvert() {
  const src = document.getElementById('cv-path').value.trim();
  if (!src) { toast('Enter a file path', 'error'); return; }
  currentLog = 'cv-log'; currentPrefix = 'cv';
  clearLog('cv-log'); setStatus('cv', 'active', 'Convertingâ€¦');
  post('/api/convert', {
    path:    src,
    format:  document.getElementById('cv-fmt').value,
    bitrate: document.getElementById('cv-bitrate').value,
  });
}

// â”€â”€ Stop â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function stopAll() {
  await fetch('/api/stop', { method: 'POST' });
  toast('Stop signal sent', 'info');
  document.getElementById('stop-status').textContent = 'â›” Stopped';
  setStatus(currentPrefix, 'error', 'Stopped');
}

// â”€â”€ Settings â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function checkTools() {
  const r = await fetch('/api/check_tools').then(r => r.json());
  const grid = document.getElementById('tools-grid');
  const icons = { 'yt-dlp': 'ğŸ“¦', 'ffmpeg': 'ğŸ', 'python': 'ğŸ', 'platform': 'ğŸ’»' };
  grid.innerHTML = r.results.map(t => `
    <div class="tool-card">
      <div class="tool-icon">${icons[t.tool] || 'ğŸ”§'}</div>
      <div style="flex:1;min-width:0">
        <div class="tool-name">${t.tool}</div>
        <div class="tool-ver">${t.version}</div>
      </div>
      <div class="tool-status">
        <span class="${t.status === 'ok' ? 'badge-ok' : 'badge-err'}">${t.status === 'ok' ? 'âœ“' : 'âœ—'}</span>
      </div>
    </div>`).join('');
}

function updateYtdlp() {
  currentLog = 'st-log'; currentPrefix = 'st';
  clearLog('st-log'); setStatus('st', 'active', 'Updatingâ€¦');
  post('/api/update_ytdlp', {});
}

// â”€â”€ Utility â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function escHtml(s) {
  return s.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
}
</script>
</body>
</html>
